/* A jQuery plugin to infinite scroll forever */
!function(t){t.frevr=function(e){var n={next:"#next-page",posts:"#posts",trigger:500},r=this,e=e||{};r.init=function(){var r=t.extend({},n,e);r.is_loading=!1,r.first_call=!0,r.version="0.2",t.data(document,"frevr",r)},r.init()},t.frevr.init=function(e){var n=t.data(document,"frevr");e=t.extend({},{before:null,after:null},e),t(window).scroll(function(){t(window).scrollTop()+t(window).height()>t(document).height()-n.trigger&&(n.is_loading||(n.is_loading=!0,"function"==typeof e.after&&e.before(),t.frevr.load_more_posts(n),"function"==typeof e.after&&e.after()))})},t.frevr.load_more_posts=function(e){if(e.first_call&&(e.first_href=e.next_href=t(e.next).attr("href"),e.first_call=!1),e.next_href){t.get(e.next_href,function(n){var r=t("<div />").html(n),f=r.find(e.posts).html(),i=r.find(e.next).attr("href");e.next_href="undefined"==typeof i||""==i?e.first_href:i,t(e.posts).append(f),t(e.next).attr("href",e.next_href)},"html").always(function(){e.is_loading=!1})}else console.log("Error next_href: "+e.next_href)}}(jQuery);
